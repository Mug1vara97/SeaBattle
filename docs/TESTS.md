# Тесты

## Модульные тесты (Unit Tests)

### GameServiceTests

#### CreateGame_ShouldCreateAndReturnNewGame
- **Описание**: Проверяет корректность создания новой игры
- **Что тестирует**:
  - Создание игры с указанным именем игрока
  - Корректность установки начальных значений полей
  - Наличие уникального идентификатора игры

#### PlaceShipsAsync_ShouldSetPlayerBoardAndFlag
- **Описание**: Проверяет размещение кораблей на доске
- **Что тестирует**:
  - Корректность установки доски игрока
  - Установку флага о завершении размещения
  - Сохранение состояния доски

#### AddGameToHistoryAsync_ShouldAddHistoryAndUpdateRankings
- **Описание**: Проверяет добавление игры в историю и обновление рейтингов
- **Что тестирует**:
  - Создание записей в истории для обоих игроков
  - Корректность обновления рейтингов (победа/поражение)
  - Правильность подсчета статистики (победы/поражения/всего игр)
  - Изменение рейтинга согласно формуле (победа +15, поражение -10)

#### GetPlayerGameHistoryAsync_ShouldReturnCorrectHistory
- **Описание**: Проверяет получение истории игр игрока
- **Что тестирует**:
  - Корректность выборки игр конкретного игрока
  - Правильность сортировки по дате (новые игры первыми)
  - Точность информации об оппонентах и результатах
  - Ограничение количества возвращаемых записей

#### GetLeaderboardAsync_ShouldReturnTopPlayersSortedByRating
- **Описание**: Проверяет получение таблицы лидеров
- **Что тестирует**:
  - Сортировку игроков по рейтингу
  - Ограничение количества возвращаемых игроков
  - Корректность отображения статистики игроков

### Вспомогательные классы для тестирования

#### TestAsyncQueryProvider
- Реализует асинхронный провайдер запросов для тестирования
- Позволяет тестировать асинхронные операции с базой данных

#### TestAsyncEnumerable
- Реализует асинхронное перечисление для тестирования
- Используется для эмуляции асинхронных коллекций

#### TestAsyncEnumerator
- Реализует асинхронный перечислитель для тестирования
- Обеспечивает асинхронное перечисление элементов

#### DbSetMocking
- Содержит вспомогательные методы для создания моков DbSet
- Позволяет эмулировать работу с базой данных в тестах
- Настраивает моки для поддержки асинхронных операций 