# 4. Системные (нефункциональные) требования

## 4.1. Производительность
*   **SR1.1:** Обновления состояния игры (ходы, результаты выстрелов, смена хода, установка флагов готовности) должны отображаться у обоих игроков с минимальной задержкой через SignalR, в идеале не более 0.5 секунды при стабильном интернет-соединении.
*   **SR1.2:** Загрузка лобби, списка игр, истории игр и таблицы лидеров не должна превышать 2-3 секунд при типичной нагрузке (до 100 одновременных пользователей).
*   **SR1.3:** Интерфейс расстановки кораблей должен реагировать на действия пользователя (выбор корабля, клик по ячейке, изменение ориентации) без видимых задержек на стороне клиента.
*   **SR1.4:** Серверная часть должна быть способна обрабатывать запросы от ~50-100 одновременно активных игроков без значительного снижения производительности.

## 4.2. Надежность
*   **SR2.1:** Система должна корректно сохранять состояние игры в базе данных (через `ApplicationDbContext` и Entity Framework Core) на ключевых этапах (создание игры, расстановка досок, завершение игры).
*   **SR2.2:** Данные пользователей (учетные записи), история игр и рейтинг игроков должны надежно храниться в базе данных PostgreSQL и быть защищены от случайной потери (например, за счет регулярных бэкапов БД, если это настроено на уровне СУБД).
*   **SR2.3:** В случае ошибки на сервере или клиенте, система должна стремиться предоставить пользователю информативное сообщение об ошибке и, по возможности, позволить продолжить работу (например, вернуться в лобби).
*   **SR2.4:** SignalR соединения должны быть достаточно устойчивы к кратковременным проблемам сети и пытаться автоматически переподключиться, если это поддерживается конфигурацией клиента и сервера.

## 4.3. Удобство использования (Usability)
*   **SR3.1:** Пользовательский интерфейс, реализованный на React, должен быть интуитивно понятным для пользователей, знакомых с игрой "Морской бой" и современными веб-приложениями. Должна соблюдаться консистентность в дизайне и взаимодействии.
*   **SR3.2:** Процесс регистрации, входа, создания/присоединения к игре, расстановки кораблей и подтверждения готовности должен быть простым, логичным и не требовать длительного обучения.
*   **SR3.3:** Визуальное представление игровых полей, кораблей (включая различные состояния: целый, подбитый), выстрелов (промах, попадание), статусов игры и информации для игрока (чей ход, ожидание и т.д.) должно быть четким, легко интерпретируемым и эстетически приятным в рамках выбранного дизайна ("Nunito" шрифт, новая цветовая палитра).
*   **SR3.4:** Приложение должно быть отзывчивым и корректно отображаться на распространенных разрешениях экранов настольных компьютеров. Адаптивность для мобильных устройств является желательной, но не первоочередной задачей на данном этапе.
*   **SR3.5:** Должны быть предоставлены четкие индикаторы состояния (например, загрузка данных, ожидание противника, ваш ход).

## 4.4. Безопасность
*   **SR4.1:** Пароли пользователей должны храниться в хешированном виде с использованием ASP.NET Core Identity (которое применяет надежные алгоритмы хеширования).
*   **SR4.2:** Передача всех данных между клиентом и сервером должна осуществляться по защищенному соединению (HTTPS) в производственной среде. В среде разработки Docker (Kestrel) может использоваться HTTP для упрощения.
*   **SR4.3:** Система должна выполнять валидацию всех входящих данных как на стороне клиента (для улучшения UX), так и на стороне сервера (для обеспечения целостности данных, предотвращения ошибок и атак).
*   **SR4.4:** Должны быть предприняты меры для предотвращения несанкционированного доступа к игровым действиям (например, попытка сделать ход не в свою очередь, выстрел по некорректным координатам, изменение состояния игры минуя серверную логику). Сервер должен быть авторитетным источником состояния игры.
*   **SR4.5:** Валидация расстановки кораблей должна производиться на сервере перед сохранением доски игрока.

## 4.5. Поддерживаемость (Maintainability)
*   **SR5.1:** Код бэкенда (C# на ASP.NET Core) и фронтенда (React, JSX) должен быть хорошо структурирован (разделение на компоненты, сервисы, модели и т.д.), следовать общепринятым конвенциям именования и форматирования для соответствующих языков и фреймворков.
*   **SR5.2:** Архитектура системы (контроллеры, сервисы, GameHub, DbContext на бэкенде; компоненты, контексты, утилиты на фронтенде) должна способствовать легкому внесению изменений и добавлению нового функционала.
*   **SR5.3:** Зависимости проекта (.NET NuGet пакеты, npm пакеты) должны управляться с помощью соответствующих менеджеров (`.csproj` для сервера, `package.json` для клиента) и регулярно обновляться по мере необходимости.
*   **SR5.4:** Использование Docker и `docker-compose.yml` должно упрощать настройку окружения разработки и развертывания.

## 4.6. Развертываемость (Deployability)
*   **SR6.1:** Приложение должно быть легко развертываемо с использованием Docker. `Dockerfile` для сервера и клиента, а также `docker-compose.yml` должны обеспечивать сборку и запуск всех компонентов приложения (сервер, клиент, база данных PostgreSQL).
*   **SR6.2:** Конфигурация приложения (например, строки подключения к БД, URL служб) должна управляться через переменные окружения, как это предусмотрено в `docker-compose.yml`.
*   **SR6.3:** Процесс миграции базы данных Entity Framework Core должен быть автоматизирован при запуске серверного контейнера.
